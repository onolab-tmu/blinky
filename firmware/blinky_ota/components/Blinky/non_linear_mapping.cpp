#include <array>

#include "blinky_functions.h"

std::array<float, 61> lut = {
  0.,                    0.008773874102714685, 0.017523573381825086,
  0.02607612819282401,   0.034620136083068465, 0.04331733831488338,
  0.05230047386528325,   0.061675388827087674, 0.07152582470159385,
  0.08191960702011791,   0.09291522321689072,  0.10456801706542795,
  0.11693543765260839,   0.13008096516534118,  0.1440764950652642,
  0.15900309789588218,   0.174950185372309,    0.19201320590535764,
  0.21029006568024444,   0.22987652620980514,  0.2508608672761513,
  0.2733181267338959,    0.29730423713112,     0.32285037488391344,
  0.34995782217678406,   0.37859361622309096,  0.4086872263716097,
  0.44012845815276036,   0.4727667360874842,   0.5064118652974956,
  0.5408363170249617,    0.575779026456492,    0.610950634117771, 
  0.64604004592588,      0.680722133122291,    0.7146663431266431,
  0.747545947214615,     0.7790476121989043,   0.8088809523456144,
  0.8367876959550755,    0.8625500897419622,   0.8859981647299889,
  0.9070155011972668,    0.9255431586351102,   0.9415814810813828,
  0.9551895499249787,    0.9664821367163857,   0.9756241090261105,
  0.982822364333689,     0.9883155116706936,   0.9923616896472224,
  0.9952251039284353,    0.9971620885614387,   0.9984077451488259,
  0.9991644930891165,    0.9995941743218074,   0.9998156985914106,
  0.9999105915463267,    0.9999392193803281,   0.999970911572436,
  1.
};

float blinky_non_linearity(float frac)
{
  /*
   * the input should be normalized so that
   * the maximum value is 0 and the minimum value
   */

  return lut_interp(frac, lut);
}
